<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sangeetha Vasthralayam | Premium Ethnic Wear</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600;800&family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
    <style>
        :root {
            --orange-gold: #FF8C00;
            --orange-light: #FFB347;
            --black: #0F0F0F;
            --ivory: #FDFBF7;
            --text: #1A1A1A;
            --success: #2ecc71;
            --danger: #e74c3c;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); }
        body { font-family: 'Montserrat', sans-serif; background: var(--ivory); color: var(--text); overflow-x: hidden; }

        header { 
            background: var(--black); 
            padding: 20px; 
            text-align: center; 
            border-bottom: 4px solid var(--orange-gold);
            position: sticky; top: 0; z-index: 100;
        }
        header h1 { font-family: 'Cinzel'; color: var(--orange-gold); font-size: 1.5rem; letter-spacing: 2px; }

        .status-badge { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 0.65rem; font-weight: 800; text-transform: uppercase; margin-top: 5px;}
        .status-open { background: var(--success); color: white; }
        .status-closed { background: var(--danger); color: white; }

        /* Sort Bar */
        .filter-bar { background: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; position: sticky; top: 85px; z-index: 90; }
        .filter-bar select { padding: 8px; border-radius: 5px; border: 1px solid var(--orange-gold); font-family: 'Montserrat'; outline: none; }
        .back-btn { background: var(--black); color: white; padding: 8px 15px; border-radius: 5px; cursor: pointer; font-size: 0.8rem; }

        .section { padding: 25px 0 25px 15px; }
        .section-header { display: flex; justify-content: space-between; align-items: center; padding-right: 15px; margin-bottom: 15px; }
        .section-header h2 { font-family: 'Cinzel'; font-size: 1.1rem; color: var(--orange-gold); }
        .view-all { color: var(--orange-gold); font-weight: 700; font-size: .75rem; cursor: pointer; border: 1px solid var(--orange-gold); padding: 4px 8px; border-radius: 4px; }

        .scroller { display: flex; gap: 15px; overflow-x: auto; padding-bottom: 15px; }
        .scroller::-webkit-scrollbar { display: none; }
        
        /* Grid Layout for View All */
        .grid-view { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; padding: 15px; }
        @media (min-width: 768px) { .grid-view { grid-template-columns: repeat(5, 1fr); } }

        .card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.05); cursor: pointer; }
        .img-box { height: 200px; width: 100%; overflow: hidden; background: #f0f0f0; display: flex; align-items: center; justify-content: center; }
        .img-box img { width: 100%; height: 100%; object-fit: cover; }
        .meta { padding: 10px; }
        .meta h3 { font-size: .75rem; height: 30px; overflow: hidden; color: #444; }
        .meta p { color: var(--orange-gold); font-weight: 800; margin-top: 5px; }

        /* Modals */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; overflow-y: auto; }
        .modal-body { background: white; margin: 15px auto; max-width: 500px; border-radius: 20px; padding: 20px; position: relative; }
        
        /* Form Styling */
        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; font-size: 0.75rem; font-weight: 700; margin-bottom: 5px; color: #666; }
        .input-group input, .input-group textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-family: inherit; }
        .input-group input:invalid { border-color: var(--danger); }

        .size-btn { padding: 10px; border: 2px solid #eee; border-radius: 8px; cursor: pointer; font-weight: 700; flex: 1; text-align: center; }
        .size-btn.active { border-color: var(--orange-gold); color: var(--orange-gold); background: #fff8f0; }

        .thumb-row { display: flex; gap: 8px; margin: 15px 0; overflow-x: auto; padding-bottom: 5px; }
        .thumb-box { width: 50px; height: 65px; border: 2px solid #eee; border-radius: 5px; overflow: hidden; flex-shrink: 0; }
        .thumb-box.active { border-color: var(--orange-gold); }
        .thumb-box img { width: 100%; height: 100%; object-fit: cover; }

        #cart-floater { position: fixed; bottom: 20px; right: 20px; background: var(--orange-gold); color: white; padding: 15px 20px; border-radius: 50px; font-weight: 800; z-index: 999; }
        
        .cart-item { display: flex; align-items: center; gap: 10px; padding: 10px 0; border-bottom: 1px solid #eee; }
        .cart-img { width: 50px; height: 50px; border-radius: 5px; overflow: hidden; }
        .cart-img img { width: 100%; height: 100%; object-fit: cover; }

        footer { background: #000; color: #666; text-align: center; padding: 30px; font-size: 0.7rem; }
    </style>
</head>
<body>

<header>
    <h1 onclick="location.reload()" style="cursor:pointer">Sangeetha Vasthralayam</h1>
    <div id="store-status"></div>
</header>

<div id="home-container">
    <div id="sections"></div>
</div>

<div id="category-container" style="display:none">
    <div class="filter-bar">
        <div class="back-btn" onclick="closeCategoryView()">‚Üê BACK</div>
        <select id="sort-logic" onchange="sortCurrentCategory()">
            <option value="recent">Sort: Recent</option>
            <option value="low">Price: Low to High</option>
            <option value="high">Price: High to Low</option>
        </select>
    </div>
    <div id="category-grid" class="grid-view"></div>
</div>

<div id="cart-floater" onclick="openCart()" style="display:none;">üõí CART (<span id="cart-count">0</span>)</div>

<div id="product-modal" class="modal">
    <div class="modal-body">
        <button onclick="closeModal()" style="float:right; border:none; background:none; font-size:1.5rem;">‚úï</button>
        <div id="main-img-cont" style="height:350px; width:100%; background:#f9f9f9; border-radius:15px; overflow:hidden;">
            <img id="m-main-pic" src="" style="width:100%; height:100%; object-fit:contain;">
        </div>
        <div class="thumb-row" id="m-thumbs"></div>
        <h2 id="m-title" style="font-family:Cinzel; margin-top:10px;"></h2>
        <p id="m-price" style="font-size:1.8rem; font-weight:800; color:var(--orange-gold);"></p>
        
        <div id="size-section">
            <p style="font-size:0.7rem; font-weight:700; color:#888;">SELECT SIZE *</p>
            <div id="m-sizes" style="display:flex; gap:8px; margin-top:10px;"></div>
        </div>

        <div style="margin-top:20px; display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
            <button onclick="addToCart()" style="background:#222; color:white; border:none; padding:15px; border-radius:10px; font-weight:700;">+ CART</button>
            <button onclick="openCheckout('direct')" style="background:var(--orange-gold); color:white; border:none; padding:15px; border-radius:10px; font-weight:700;">BUY NOW</button>
        </div>
    </div>
</div>

<div id="checkout-modal" class="modal">
    <div class="modal-body">
        <h2 style="font-family:Cinzel; margin-bottom:20px;">Shipping Details</h2>
        <form id="shipping-form">
            <div class="input-group">
                <label>FULL NAME *</label>
                <input type="text" id="cust-name" required placeholder="e.g. Rahul Sharma">
            </div>
            <div class="input-group">
                <label>PHONE NUMBER *</label>
                <input type="tel" id="cust-phone" required pattern="[0-9]{10}" placeholder="10 Digit Mobile Number">
            </div>
            <div class="input-group">
                <label>COMPLETE ADDRESS *</label>
                <textarea id="cust-address" required rows="4" placeholder="House No, Street, Landmark, City, Pincode"></textarea>
            </div>
            <button type="submit" style="width:100%; background:var(--orange-gold); color:white; padding:18px; border:none; border-radius:12px; font-weight:800;">FINALIZE ORDER (WHATSAPP)</button>
            <button type="button" onclick="closeCheckout()" style="width:100%; margin-top:10px; background:none; border:none; color:#888;">Cancel</button>
        </form>
    </div>
</div>

<div id="cart-modal" class="modal"><div class="modal-body"><h2>Your Cart</h2><div id="cart-items-list"></div><button onclick="openCheckout('cart')" style="width:100%; background:var(--orange-gold); color:white; padding:15px; margin-top:20px; border:none; border-radius:10px;">PROCEED TO CHECKOUT</button><button onclick="closeCart()" style="width:100%; border:none; background:none; margin-top:10px;">Back</button></div></div>

<footer>¬© 2026 SANGEETHA VASTHRALAYAM</footer>

<script>
// Specific Data for Kurtha 1 and Kurtha 2
const specificItems = {
    "Kurtas Premium #1": ["https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/e/i/k/l-pwk694-purshottam-wala-original-imahjx486gkhgujr.jpeg?q=90","https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/h/k/w/xl-hek694-dressar-original-imahjfcqrbggyznb.jpeg?q=90","https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/c/x/p/xl-hek694-dressar-original-imahjfcnxjg5fqq.jpeg?q=90","https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/e/i/k/l-pwk694-purshottam-wala-original-imahjx486gkhgujr.jpeg?q=90"],
    "Kurtas Premium #2": ["https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/g/p/n/xxl-pwk113-purshottam-wala-original-imahktdan8achghk.jpeg?q=90","https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/l/p/u/s-hek113-dressar-original-imahkffrrhchyzku.jpeg?q=90","https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/l/b/z/xxl-hek113-dressar-original-imahkffrubwnz9n8.jpeg?q=90","https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/c/q/h/l-hek113-dressar-original-imahkffrgkqn9gfm.jpeg?q=90"]
};

const categories = [
    {name:"Kurtas", icon:"üëò", price:1299, hasSize:true},
    {name:"Tops", icon:"üëö", price:899, hasSize:true},
    {name:"Leggings", icon:"üëñ", price:499, hasSize:true},
    {name:"Sarees", icon:"ü•ª", price:3500, hasSize:false}
];

let cart = [];
let currentItem = {};
let selectedSize = "";
let currentViewedCategoryItems = [];
let checkoutMode = "direct";

window.onload = () => {
    updateStatus();
    renderHome();
    loadSavedDetails();
};

function updateStatus() {
    const hr = new Date().getHours() + new Date().getMinutes()/60;
    const badge = document.getElementById("store-status");
    badge.innerHTML = (hr >= 9 && hr <= 22.5) ? `<span class="status-badge status-open">‚óè Shop Open</span>` : `<span class="status-badge status-closed">‚óè Shop Closed</span>`;
}

function renderHome() {
    const limit = window.innerWidth <= 768 ? 4 : 10;
    const root = document.getElementById("sections");
    root.innerHTML = categories.map(cat => `
        <div class="section">
            <div class="section-header"><h2>${cat.name}</h2><span class="view-all" onclick="openCategoryView('${cat.name}')">View All 50+</span></div>
            <div class="scroller">${generateSet(cat, limit).map(i => renderCard(i)).join("")}</div>
        </div>`).join("");
}

function generateSet(cat, num) {
    return Array.from({length: num}, (_, i) => {
        const name = `${cat.name} Premium #${i+1}`;
        const imgs = specificItems[name] || [cat.icon, cat.icon, cat.icon, cat.icon];
        return { name, basePrice: cat.price + (i * 20), images: imgs, hasSize: cat.hasSize, isIcon: !specificItems[name], id: name + Date.now() };
    });
}

function renderCard(item) {
    const img = item.isIcon ? `<div style="font-size:3.5rem">${item.images[0]}</div>` : `<img src="${item.images[0]}" loading="lazy">`;
    return `<div class="card" onclick='openProduct(${JSON.stringify(item)})'><div class="img-box">${img}</div><div class="meta"><h3>${item.name}</h3><p>‚Çπ${item.basePrice}</p></div></div>`;
}

// 1. View All Logic
function openCategoryView(catName) {
    const cat = categories.find(c => c.name === catName);
    currentViewedCategoryItems = generateSet(cat, 50);
    document.getElementById("home-container").style.display = "none";
    document.getElementById("category-container").style.display = "block";
    renderCategoryGrid(currentViewedCategoryItems);
    window.scrollTo(0,0);
}

function closeCategoryView() {
    document.getElementById("home-container").style.display = "block";
    document.getElementById("category-container").style.display = "none";
}

function renderCategoryGrid(items) {
    document.getElementById("category-grid").innerHTML = items.map(i => renderCard(i)).join("");
}

function sortCurrentCategory() {
    const logic = document.getElementById("sort-logic").value;
    let sorted = [...currentViewedCategoryItems];
    if(logic === "low") sorted.sort((a,b) => a.basePrice - b.basePrice);
    if(logic === "high") sorted.sort((a,b) => b.basePrice - a.basePrice);
    if(logic === "recent") sorted = sorted.sort(() => Math.random() - 0.5);
    renderCategoryGrid(sorted);
}

// Product Details
function openProduct(item) {
    currentItem = item;
    selectedSize = "";
    document.getElementById("m-title").innerText = item.name;
    document.getElementById("m-price").innerText = "‚Çπ" + item.basePrice;
    
    const pic = document.getElementById("m-main-pic");
    const thumbBox = document.getElementById("m-thumbs");
    
    if(item.isIcon) {
        document.getElementById("main-img-cont").innerHTML = `<div style="font-size:8rem; display:flex; height:100%; align-items:center; justify-content:center;">${item.images[0]}</div>`;
        thumbBox.innerHTML = "";
    } else {
        document.getElementById("main-img-cont").innerHTML = `<img id="m-main-pic" src="${item.images[0]}" style="width:100%; height:100%; object-fit:contain;">`;
        thumbBox.innerHTML = item.images.map((img, idx) => `<div class="thumb-box ${idx===0?'active':''}" onclick="swapImg(this, '${img}')"><img src="${img}"></div>`).join("");
    }

    const mSizes = document.getElementById("m-sizes");
    if(item.hasSize) {
        document.getElementById("size-section").style.display = "block";
        mSizes.innerHTML = ["S","M","L","XL","XXL"].map((s, i) => `<div class="size-btn" onclick="pickSize(this, '${s}', ${i * 50})">${s}</div>`).join("");
    } else {
        document.getElementById("size-section").style.display = "none";
        selectedSize = "N/A";
    }
    document.getElementById("product-modal").style.display = "block";
}

function swapImg(el, src) {
    document.getElementById("m-main-pic").src = src;
    document.querySelectorAll('.thumb-box').forEach(t => t.classList.remove('active'));
    el.classList.add('active');
}

function pickSize(el, s, extra) {
    selectedSize = s;
    document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('active'));
    el.classList.add('active');
    currentItem.finalPrice = currentItem.basePrice + extra;
    document.getElementById("m-price").innerText = "‚Çπ" + currentItem.finalPrice;
}

// Cart & Checkout Logic
function addToCart() {
    if(!selectedSize) { alert("Please select a size!"); return; }
    const img = currentItem.isIcon ? currentItem.images[0] : document.getElementById("m-main-pic").src;
    cart.push({...currentItem, size: selectedSize, cartImg: img, finalPrice: currentItem.finalPrice || currentItem.basePrice});
    updateCartUI();
    closeModal();
}

function updateCartUI() {
    document.getElementById("cart-floater").style.display = cart.length > 0 ? "block" : "none";
    document.getElementById("cart-count").innerText = cart.length;
}

function openCart() {
    const list = document.getElementById("cart-items-list");
    list.innerHTML = cart.map((i, idx) => `
        <div class="cart-item">
            <div class="cart-img">${i.isIcon ? '<span>'+i.cartImg+'</span>' : '<img src="'+i.cartImg+'">'}</div>
            <div style="flex:1"><b>${i.name}</b><br><small>Size: ${i.size}</small></div>
            <div>‚Çπ${i.finalPrice} <button onclick="cart.splice(${idx},1); updateCartUI(); openCart();" style="color:red; border:none; background:none;">‚úï</button></div>
        </div>`).join("");
    document.getElementById("cart-modal").style.display = "block";
}

function openCheckout(mode) {
    if(mode === 'direct' && !selectedSize) { alert("Select size first!"); return; }
    checkoutMode = mode;
    document.getElementById("checkout-modal").style.display = "block";
}

// 2. Local Storage Logic
function loadSavedDetails() {
    if(localStorage.getItem("sv_name")) document.getElementById("cust-name").value = localStorage.getItem("sv_name");
    if(localStorage.getItem("sv_phone")) document.getElementById("cust-phone").value = localStorage.getItem("sv_phone");
    if(localStorage.getItem("sv_address")) document.getElementById("cust-address").value = localStorage.getItem("sv_address");
}

document.getElementById("shipping-form").onsubmit = (e) => {
    e.preventDefault();
    const name = document.getElementById("cust-name").value;
    const phone = document.getElementById("cust-phone").value;
    const addr = document.getElementById("cust-address").value;
    
    // Save to LocalStorage
    localStorage.setItem("sv_name", name);
    localStorage.setItem("sv_phone", phone);
    localStorage.setItem("sv_address", addr);
    
    let orderItems = checkoutMode === 'direct' ? [{...currentItem, size: selectedSize, cartImg: currentItem.isIcon ? currentItem.images[0] : document.getElementById("m-main-pic").src, finalPrice: currentItem.finalPrice || currentItem.basePrice}] : cart;
    
    let text = `*NEW ORDER: SANGEETHA VASTHRALAYAM*\n\n*Customer:* ${name}\n*Phone:* ${phone}\n*Address:* ${addr}\n\n*Items:*\n`;
    let total = 0;
    orderItems.forEach((i, idx) => {
        text += `${idx+1}. ${i.name} (${i.size}) - ‚Çπ${i.finalPrice}\nLink: ${i.cartImg}\n\n`;
        total += i.finalPrice;
    });
    text += `*GRAND TOTAL: ‚Çπ${total}*`;
    
    window.open(`https://wa.me/919618476045?text=${encodeURIComponent(text)}`);
};

function closeModal() { document.getElementById("product-modal").style.display = "none"; }
function closeCart() { document.getElementById("cart-modal").style.display = "none"; }
function closeCheckout() { document.getElementById("checkout-modal").style.display = "none"; }
</script>
</body>
</html>
