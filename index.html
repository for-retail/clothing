<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sangeetha Vasthralayam | Premium Ethnic Wear</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600;800&family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root { --orange-gold: #FF8C00; --orange-light: #FFB347; --black: #0F0F0F; --ivory: #FDFBF7; --text: #1A1A1A; --success: #2ecc71; --danger: #e74c3c; }
        * { margin: 0; padding: 0; box-sizing: border-box; transition: all 0.3s ease; }
        body { font-family: 'Montserrat', sans-serif; background: var(--ivory); color: var(--text); overflow-x: hidden; }

        header { background: var(--black); padding: 15px 20px; border-bottom: 4px solid var(--orange-gold); position: sticky; top: 0; z-index: 100; display: flex; justify-content: space-between; align-items: center; }
        header h1 { font-family: 'Cinzel'; color: var(--orange-gold); font-size: 1.2rem; letter-spacing: 1px; flex: 1; text-align: center; margin-left: 40px; }
        .insta-head { color: #E4405F; font-size: 1.5rem; text-decoration: none; }

        .status-badge { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 0.6rem; font-weight: 800; text-transform: uppercase; margin-top: 5px;}
        .status-open { background: var(--success); color: white; }
        .status-closed { background: var(--danger); color: white; }

        .section { padding: 25px 0 25px 15px; }
        .section-header { display: flex; justify-content: space-between; align-items: center; padding-right: 15px; margin-bottom: 15px; }
        .section-header h2 { font-family: 'Cinzel'; font-size: 1.1rem; color: var(--orange-gold); }
        .view-all { color: var(--orange-gold); font-weight: 700; font-size: .75rem; cursor: pointer; border: 1px solid var(--orange-gold); padding: 4px 8px; border-radius: 4px; }

        .scroller { display: flex; gap: 15px; overflow-x: auto; padding-bottom: 15px; scroll-behavior: smooth; }
        .scroller::-webkit-scrollbar { display: none; }
        
        .grid-view { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; padding: 15px; }
        @media (min-width: 768px) { .grid-view { grid-template-columns: repeat(5, 1fr); } }

        .card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.05); cursor: pointer; min-width: 160px; }
        .img-box { height: 200px; width: 100%; overflow: hidden; background: #f0f0f0; display: flex; align-items: center; justify-content: center; }
        .img-box img { width: 100%; height: 100%; object-fit: cover; }
        .meta { padding: 10px; }
        .meta h3 { font-size: .75rem; height: 30px; overflow: hidden; color: #444; }
        .meta p { color: var(--orange-gold); font-weight: 800; margin-top: 5px; }

        /* Modals */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 2000; overflow-y: auto; padding: 20px 0; }
        .modal-body { background: white; margin: 0 auto; max-width: 500px; border-radius: 20px; padding: 20px; position: relative; animation: slideUp 0.3s; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; font-size: 0.75rem; font-weight: 700; margin-bottom: 5px; color: #666; }
        .input-group input, .input-group textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-family: inherit; font-size: 0.9rem; }

        .size-btn { padding: 10px; border: 2px solid #eee; border-radius: 8px; cursor: pointer; font-weight: 700; flex: 1; text-align: center; font-size: 0.7rem; min-width: 65px; }
        .size-btn.active { border-color: var(--orange-gold); color: var(--orange-gold); background: #fff8f0; }

        .thumb-row { display: flex; gap: 8px; margin: 15px 0; overflow-x: auto; padding-bottom: 5px; }
        .thumb-box { width: 60px; height: 80px; border: 2px solid #eee; border-radius: 5px; flex-shrink: 0; cursor: pointer; display: flex; align-items: center; justify-content: center; background: #f9f9f9; overflow: hidden; }
        .thumb-box.active { border-color: var(--orange-gold); }
        .thumb-box img { width: 100%; height: 100%; object-fit: cover; }

        #cart-floater { position: fixed; bottom: 20px; right: 20px; background: var(--orange-gold); color: white; padding: 15px 20px; border-radius: 50px; font-weight: 800; z-index: 999; box-shadow: 0 5px 15px rgba(255,140,0,0.4); cursor: pointer; }
        
        .cart-item { display: flex; align-items: center; gap: 10px; padding: 10px 0; border-bottom: 1px solid #eee; }
        .cart-img { width: 50px; height: 50px; border-radius: 5px; overflow: hidden; background: #eee; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }

        .contact-card { background: white; margin: 20px 15px; padding: 25px; border-radius: 15px; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .social-btns { display: flex; justify-content: center; gap: 15px; margin-top: 15px; }
        .wa-link { background: #25D366; color: white; padding: 12px 20px; border-radius: 10px; text-decoration: none; font-weight: 700; font-size: 0.85rem; }
        .ig-link { background: linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%); color: white; padding: 12px 20px; border-radius: 10px; text-decoration: none; font-weight: 700; font-size: 0.85rem; }

        footer { background: #000; color: #666; text-align: center; padding: 30px; font-size: 0.7rem; }
    </style>
</head>
<body>

<header>
    <div style="width: 30px;"></div>
    <h1 onclick="location.reload()" style="cursor:pointer">Sangeetha Vasthralayam</h1>
    <a href="https://instagram.com/YOUR_USER_NAME" target="_blank" class="insta-head"><i class="fab fa-instagram"></i></a>
</header>

<div id="home-container">
    <div style="text-align: center; padding-top: 10px;" id="store-status"></div>
    <div id="sections"></div>
    
    <div class="contact-card">
        <h2 style="font-family: Cinzel; color: var(--orange-gold); font-size: 1.2rem;">Contact Us</h2>
        <div class="social-btns">
            <a href="https://wa.me/91XXXXXXXXXX" class="wa-link"><i class="fab fa-whatsapp"></i> WhatsApp</a>
            <a href="https://instagram.com/YOUR_USER_NAME" class="ig-link"><i class="fab fa-instagram"></i> Instagram</a>
        </div>
    </div>
</div>

<div id="category-container" style="display:none">
    <div style="background: white; padding: 15px; border-bottom: 1px solid #eee; display: flex; align-items: center; gap: 20px; position: sticky; top: 60px; z-index: 90;">
        <button onclick="closeCategoryView()" style="background: #222; color: white; border: none; padding: 8px 12px; border-radius: 5px;">‚Üê BACK</button>
        <h2 id="cat-title" style="font-family: Cinzel; color: var(--orange-gold); font-size: 1rem;"></h2>
    </div>
    <div id="category-grid" class="grid-view"></div>
</div>

<div id="cart-floater" onclick="openCart()" style="display:none;">üõí CART (<span id="cart-count">0</span>)</div>

<div id="product-modal" class="modal">
    <div class="modal-body">
        <button onclick="closeModal()" style="float:right; border:none; background:none; font-size:1.5rem;">‚úï</button>
        <div id="main-img-cont" style="height:350px; width:100%; background:#f9f9f9; border-radius:15px; overflow:hidden; display: flex; align-items: center; justify-content: center;">
            <img id="m-main-pic" src="" style="width:100%; height:100%; object-fit:contain;">
        </div>
        <div class="thumb-row" id="m-thumbs"></div>
        <h2 id="m-title" style="font-family:Cinzel; margin-top:10px; font-size: 1.1rem;"></h2>
        <p id="m-price" style="font-size:1.6rem; font-weight:800; color:var(--orange-gold);"></p>
        
        <div id="size-section">
            <p style="font-size:0.7rem; font-weight:700; color:#888; margin-top: 10px;">SELECT SIZE *</p>
            <div id="m-sizes" style="display:flex; gap:8px; margin-top:10px; flex-wrap: wrap;"></div>
        </div>

        <div style="margin-top:20px; display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
            <button onclick="addToCart()" style="background:#222; color:white; border:none; padding:15px; border-radius:10px; font-weight:700;">+ CART</button>
            <button onclick="openCheckout('direct')" style="background:var(--orange-gold); color:white; border:none; padding:15px; border-radius:10px; font-weight:700;">BUY NOW</button>
        </div>
    </div>
</div>

<div id="checkout-modal" class="modal">
    <div class="modal-body">
        <h2 style="font-family:Cinzel; margin-bottom:15px; font-size: 1.2rem;">Delivery Details</h2>
        <form id="shipping-form" onsubmit="handleOrder(event)">
            <div class="input-group">
                <label>CUSTOMER NAME *</label>
                <input type="text" id="cust-name" required placeholder="Enter your full name">
            </div>
            <div class="input-group">
                <label>PHONE NUMBER *</label>
                <input type="tel" id="cust-phone" required pattern="[0-9]{10}" placeholder="10 Digit Number">
            </div>
            <div class="input-group">
                <label>FULL ADDRESS *</label>
                <textarea id="cust-address" required rows="3" placeholder="House No, City, Pincode"></textarea>
            </div>
            <button type="submit" style="width:100%; background:var(--orange-gold); color:white; padding:18px; border:none; border-radius:12px; font-weight:800;">CONFIRM & SEND ON WHATSAPP</button>
            <button type="button" onclick="closeCheckout()" style="width:100%; margin-top:10px; background:none; border:none; color:#888;">Cancel</button>
        </form>
    </div>
</div>

<div id="cart-modal" class="modal">
    <div class="modal-body">
        <h2 style="font-family: Cinzel; font-size: 1.2rem;">Your Cart</h2>
        <div id="cart-items-list" style="max-height: 300px; overflow-y: auto; margin-top: 10px;"></div>
        <div id="cart-total" style="margin-top: 15px; font-weight: 800; border-top: 1px solid #eee; padding-top: 10px; text-align: right; color: var(--orange-gold);"></div>
        <button onclick="openCheckout('cart')" style="width:100%; background:var(--orange-gold); color:white; padding:15px; margin-top:20px; border:none; border-radius:10px; font-weight: 700;">PROCEED TO CHECKOUT</button>
        <button onclick="closeCart()" style="width:100%; border:none; background:none; margin-top:10px;">Close</button>
    </div>
</div>

<footer>¬© 2026 SANGEETHA VASTHRALAYAM</footer>

<script>
// --- MASTER DATA ---
// Ikkada nuvvu products add cheyali mawa. Chudu ela undo:
const allProducts = {
    "kurtas": { 
    displayName: "Premium Kurtas", 
    hasSize: true, 
    items: [
        { 
            id: "KRT-01", 
            name: "Floral Anarkali Kurta", 
            images: [
                "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/u/z/j/s-box-patbro-original-imah3ptsufqegbp8.jpeg?q=90", 
                "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/o/w/9/s-box-patbro-original-imah3ptszjcy9m5x.jpeg?q=90",
                "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/c/m/u/s-box-patbro-original-imah3ptsdgvej7he.jpeg?q=90",
                "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/2/q/w/3xl-box-patbro-original-imahfmsk6vv26svx.jpeg?q=90"
            ],
            sizePrices: { 
                "S": 899, "M": 999, "L": 1099, "XL": 1199, "XXL": 1299, "XXXL": 1399 
            } 
        },
        { 
            id: "KRT-02", 
            name: "Cotton Silk Party Kurta", 
            images: [
                "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/t/b/t/m-151to152-hetsa-original-imafyz2n5xzzgb2m-bb.jpeg?q=90", 
                "https://rukminim2.flixcart.com/image/1536/1536/kj0bp8w0-0/kurta/h/c/m/m-151to152-hetsa-original-imafyz2nqu7qvzwz.jpeg?q=90", 
                "https://rukminim2.flixcart.com/image/1536/1536/l3uhvgw0/shopsy-kurta/n/m/4/l-151to152-shopglobal-original-imafyz2nz5h87q6y.jpeg?q=90", 
            ],
            sizePrices: { 
                "S": 1200, "M": 1250, "L": 1300, "XL": 1350, "XXL": 1400, "XXXL": 1500 
            } 
        },
        { 
            id: "KRT-03", // <--- ID marchanu
            name: "Cotton Silk Party Kurta", 
            images: [
                "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/g/6/l/xl-ssimran-petopian-original-imahje8zqcanmzbg.jpeg?q=90", 
                "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/s/i/2/xl-ssimran-petopian-original-imahje8zrgc38ybg.jpeg?q=90", 
                "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/a/m/2/xl-ssimran-petopian-original-imahje8zeywwzqfz.jpeg?q=90", 
                "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/c/5/h/xl-ssimran-petopian-original-imahje8zaqs3xnpg.jpeg?q=90",
                "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/v/t/e/xl-ssimran-petopian-original-imahje8zzzphxsng.jpeg?q=90"
            ],
            sizePrices: { 
                "S": 1200, "M": 1250, "L": 1300, "XL": 1350, "XXL": 1400, "XXXL": 1500 
            } 
        },
        { 
            id: "KRT-04", // <--- ID marchanu
            name: "Cotton Silk Party Kurta", 
            images: [
                "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/7/s/u/4xl-1212-rare-thread-original-imahg55mwsgznk4y.jpeg?q=90", 
                "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/1/z/9/4xl-1212-rare-thread-original-imahg55mtvwmqrjn.jpeg?q=90", 
                "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/a/y/p/4xl-1212-rare-thread-original-imahgrxbscxfbsj3.jpeg?q=90", 
                "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/d/3/n/4xl-1212-rare-thread-original-imahg55mud9szzsw.jpeg?q=90"
            ],
            sizePrices: { 
                "S": 1200, "M": 1250, "L": 1300, "XL": 1350, "XXL": 1400, "XXXL": 1500 
            } 
        },
        { 
            id: "KRT-04", // <--- ID marchanu
            name: "Cotton Silk Party Kurta", 
            images: [
                "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/w/e/d/-original-imahchgydh44gdkq.jpeg?q=90", 
                "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/k/e/f/-original-imahjzwce6gzmgwq.jpeg?q=90", 
                "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/y/v/p/xxl-long-kurti-fabzari-original-imahfyy3erzsctay.jpeg?q=90g", 
                "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/r/r/b/-original-imahjzwcagthxeja.jpeg?q=90"
            ],
            sizePrices: { 
                "S": 1200, "M": 1250, "L": 1300, "XL": 1350, "XXL": 1400, "XXXL": 1500 
            } 
        }
    ] 
},// <--- Prathi product tharvatha comma (,) marchipoku mawa!

    "tops": { 
    displayName: "Trendy Tops", 
    hasSize: true, 
    items: [
        {
            id: "TP-01",
            name: "Western Party Top",
            images: ["https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/k/x/p/xxl-rs-1065green-kurti-nakshkurtis-original-imahjsrmzggv4zef.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/i/f/n/l-rs-1065green-kurti-nakshkurtis-original-imahjsrmbbmzzegk.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/l/m/z/xl-rs-1065green-kurti-nakshkurtis-original-imahjsrmhaymgsvg.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/z/g/c/xl-rs-1065green-kurti-nakshkurtis-original-imahjsrmhxzr4xmv.jpeg?q=90"],
            sizePrices: { "S": 450, "M": 450, "L": 500, "XL": 550, "XXL": 600, "XXXL": 650 }
        }, 
        {
            id: "TP-02",
            name: "Floral Summer Crop Top", 
            images: ["https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/b/d/z/l-rs-1065green-kurti-nakshkurtis-original-imahjsrmkahhywch.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/w/1/6/m-rs-1065green-kurti-nakshkurtis-original-imahjsrmwmagke6g.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/kurta/u/4/a/xl-rs-1065green-kurti-nakshkurtis-original-imahjsrmvqvjmsgz.jpeg?q=90"],
            sizePrices: { "S": 399, "M": 399, "L": 449, "XL": 499, "XXL": 549, "XXXL": 599 }
        },
        {
            id: "TP-03",
            name: "Floral Summer Crop Top", 
            images: ["https://rukminim2.flixcart.com/image/1536/1536/xif0q/top/t/u/2/s-1-5014-raave-original-imah9fhcpr2jg5gh.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/top/z/k/i/l-1-dd-078-black-multi-drape-and-dazzle-original-imahaxucmhucfzvp.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/top/r/q/j/l-1-dd-078-black-multi-drape-and-dazzle-original-imahaxuccbcyrfg9.jpeg?q=90"],
            sizePrices: { "S": 399, "M": 399, "L": 449, "XL": 499, "XXL": 549, "XXXL": 599 }
        },
        {
            id: "TP-04",
            name: "Floral Summer Crop Top", 
            images: ["https://rukminim2.flixcart.com/image/1536/1536/xif0q/top/r/z/u/xl-1-dd-078-black-multi-drape-and-dazzle-original-imahksaegn5q6n9n.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/top/9/a/s/l-1-ser021-cutext-fashion-original-imahksaaundvzy3e.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/top/j/4/i/l-1-ser021-cutext-fashion-original-imahksaakyznkrv5.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/top/6/b/g/l-1-ser021-cutext-fashion-original-imahksaavbnchger.jpeg?q=90"],
            sizePrices: { "S": 399, "M": 399, "L": 449, "XL": 499, "XXL": 549, "XXXL": 599 }
        },
        {
            id: "TP-05",
            name: "Floral Summer Crop Top", 
            images: ["https://rukminim2.flixcart.com/image/1536/1536/xif0q/top/i/e/j/m-125-blue-top-cavercha-original-imahc6gxdzgfdnzu.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/top/j/w/a/m-125-blue-top-cavercha-original-imahc6gxuhyrzwg4.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/top/r/c/o/-original-imahkfgnzsw72utr.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/top/h/1/c/m-125-blue-top-cavercha-original-imahc6gxzzjhjtqs.jpeg?q=90"],
            sizePrices: { "S": 399, "M": 399, "L": 449, "XL": 499, "XXL": 549, "XXXL": 599 }
        },
        {
            id: "TP-06",
            name: "Floral Summer Crop Top", 
            images: ["https://rukminim2.flixcart.com/image/1536/1536/xif0q/top/5/x/k/xl-1-104-green-ps-fashion-original-imahgakgzkgp2zy5.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/top/s/h/d/m-1-104-green-ps-fashion-original-imahgakgaqj39x82.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/top/y/u/w/s-1-tf-026-gxs-original-imahg842msrrr44h.jpeg?q=90"],
            sizePrices: { "S": 399, "M": 399, "L": 449, "XL": 499, "XXL": 549, "XXXL": 599 }
        }
    ] 
            
 
    },
    "Ankle Length Dress": { 
        displayName: "Ankle Length Dresses", 
        hasSize: true, 
        items: [
             {
                id: "LG-01",
                name: "Ankle Lengths",
                images: ["https://rukminim2.flixcart.com/image/1536/1536/xif0q/dress/u/q/v/xl-pwd322-purshottam-wala-original-imahg4uure4zz5gu.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/dress/l/n/6/xl-pwd322-purshottam-wala-original-imahg4uufggamp79.jpeg?q=90",],
                sizePrices: { "S": 1299, "M": 1399, "L": 1499, "XL": 1599, "XXL": 1699, "XXXL": 1799 }
            },
            {
                id: "LG-01",
                name: "Ankle Length",
                images: ["https://rukminim2.flixcart.com/image/1536/1536/xif0q/dress/u/q/v/xl-pwd322-purshottam-wala-original-imahg4uure4zz5gu.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/dress/l/n/6/xl-pwd322-purshottam-wala-original-imahg4uufggamp79.jpeg?q=90",],
                sizePrices: { "S": 1299, "M": 1399, "L": 1499, "XL": 1599, "XXL": 1699, "XXXL": 1799 }
            },
            {
                id: "LG-01",
                name: "Ankle Length",
                images: ["https://rukminim2.flixcart.com/image/1536/1536/kxgfzbk0/dress/z/z/v/l-st22122021p4-city-craft-original-imag9whdxeqz42qj.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/dress/l/n/6/xl-pwd322-purshottam-wala-original-imahg4uufggamp79.jpeg?q=90",],
                sizePrices: { "S": 1299, "M": 1399, "L": 1499, "XL": 1599, "XXL": 1699, "XXXL": 1799 }
            },
            {
                id: "LG-01",
                name: "Ankle Length",
                images: ["https://rukminim2.flixcart.com/image/1536/1536/xif0q/dress/u/q/v/xl-pwd322-purshottam-wala-original-imahg4uure4zz5gu.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/kxgfzbk0/dress/h/k/q/l-st22122021p4-city-craft-original-imag9whde3cdhkhn.jpeg?q=90",],
                sizePrices: { "S": 1299, "M": 1399, "L": 1499, "XL": 1599, "XXL": 1699, "XXXL": 1799 }
            },
            {
                id: "LG-01",
                name: "Ankle Length",
                images: ["https://rukminim2.flixcart.com/image/1536/1536/xif0q/dress/m/h/s/xxl-new-aline-maxi-dress-in-floral-print-for-womens-qena-original-imaghy8pkjswhtx4.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/dress/a/1/e/l-7500-3-varnifashon-original-imaghy8zxfbrhtse.jpeg?q=90",],
                sizePrices: { "S": 1299, "M": 1399, "L": 1499, "XL": 1599, "XXL": 1699, "XXXL": 1799 }
            },
        ] 
    },
    "sarees": { 
        displayName: "Sarees Collection", 
        hasSize: false, 
        items: [
            { 
                id: "S-01", 
                name: "Designer Silk Saree", 
                price: 3500, 
                images: ["https://rukminim2.flixcart.com/image/1536/1536/xif0q/sari/u/d/w/free-adhya-350-morpich-airevo-unstitched-original-imahdr6kgxkyxsag.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/sari/c/n/a/free-hm-350-gariya-unstitched-original-imahhttxuqhxs59y.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/sari/z/k/o/free-hm-350-gariya-unstitched-original-imahhttxvfyzfq9g.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/sari/4/u/v/free-hm-350-gariya-unstitched-original-imahhttxynhgnhwz.jpeg?q=90"] 
            },
            { 
                id: "S-01", 
                name: "Designer Silk Saree", 
                price: 3500, 
                images: ["https://rukminim2.flixcart.com/image/1536/1536/xif0q/shopsy-sari/o/4/t/free-s-216-wine-rj-creation-unstitched-original-imahjgq4uhsvh4yb.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/sari/l/v/a/free-s-216-rj-creation-unstitched-original-imahg3egx5xfwgva.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/shopsy-sari/f/z/s/free-s-216-wine-rj-creation-unstitched-original-imahjgq4rhmz8ubw.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/shopsy-sari/h/s/p/free-s-216-wine-rj-creation-unstitched-original-imahjgq4tzqqzzg2.jpeg?q=90"] 
            },
            { 
                id: "S-01", 
                name: "Designer Silk Saree", 
                price: 3500, 
                images: ["https://rukminim2.flixcart.com/image/1536/1536/xif0q/shopsy-sari/z/n/o/free-shamsa2-skyblue-spy-silkora-unstitched-original-imahguf44xgyvtdz.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/shopsy-sari/p/m/c/free-shamsa2-skyblue-spy-silkora-unstitched-original-imahguf4yjpw7wqs.jpeg?q=90"] 
            },
            { 
                id: "S-01", 
                name: "Designer Silk Saree", 
                price: 3500, 
                images: ["https://rukminim2.flixcart.com/image/1536/1536/xif0q/sari/f/4/i/free-doshi-myraani-unstitched-original-imahhjqhyadwngcf.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/sari/t/o/u/free-doshi-myraani-unstitched-original-imahhjqhhrq9zaqu.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/sari/8/h/o/free-doshi-myraani-unstitched-original-imahhjqhgqjyyyhy.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/sari/y/l/3/free-doshi-myraani-unstitched-original-imahhjqhgqgarrhr.jpeg?q=90"] 
            },
            { 
                id: "S-01", 
                name: "Designer Silk Saree", 
                price: 3500, 
                images: ["https://rukminim2.flixcart.com/image/1536/1536/xif0q/sari/r/7/2/free-king-green-superlaxmi-unstitched-original-imahkhxjnfcgfbjf.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/sari/x/c/w/free-king-green-superlaxmi-unstitched-original-imahkhxjrgb2uftb.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/sari/i/t/f/free-king-green-superlaxmi-unstitched-original-imahkhxjkrzpzhkf.jpeg?q=90", "https://rukminim2.flixcart.com/image/1536/1536/xif0q/sari/m/u/w/free-king-green-superlaxmi-unstitched-original-imahkhxjmvcfzzmw.jpeg?q=90"] 
            },

        ]
    }
};
// Generate test data with custom prices
for(let i=1; i<=10; i++) {
    allProducts.kurtas.items.push({
        id: "KRT-"+i, name: "Kurta Set #"+i, images: ["üëò"],
        sizePrices: { "S": 800, "M": 850, "L": 900, "XL": 950, "XXL": 1000, "XXXL": 1100 }
    });
    allProducts["Ankle Length Dress"].items.push({
        id: "LEG-"+i, name: "Ankle Length Dresst #"+i, images: ["üëò"],
        sizePrices: { "S": 350, "M": 350, "L": 400, "XL": 400, "XXL": 450, "XXXL": 500 }
    });
}

let cart = [];
let currentItem = {};
let selectedSize = "";
let currentPrice = 0;
let orderSource = "";

window.onload = () => { updateStatus(); renderHome(); };

function updateStatus() {
    const hr = new Date().getHours();
    document.getElementById("store-status").innerHTML = (hr >= 9 && hr <= 22) ? `<span class="status-badge status-open">‚óè Shop Open</span>` : `<span class="status-badge status-closed">‚óè Shop Closed</span>`;
}

function renderHome() {
    const root = document.getElementById("sections");
    root.innerHTML = Object.keys(allProducts).map(catKey => {
        const cat = allProducts[catKey];
        if(!cat.items.length) return "";
        return `
            <div class="section">
                <div class="section-header">
                    <h2>${cat.displayName}</h2>
                    <span class="view-all" onclick="openCategoryView('${catKey}')">View All</span>
                </div>
                <div class="scroller">${cat.items.slice(0, 10).map(i => renderCard(i, cat.hasSize)).join("")}</div>
            </div>`;
    }).join("");
}

function renderCard(item, hasSize) {
    const content = item.images[0].length <= 4 ? `<span style="font-size:4rem">${item.images[0]}</span>` : `<img src="${item.images[0]}">`;
    const displayPrice = item.sizePrices ? item.sizePrices["S"] : item.price;
    return `<div class="card" onclick='openProduct(${JSON.stringify({...item, hasSize})})'>
        <div class="img-box">${content}</div>
        <div class="meta"><h3>${item.name}</h3><p>‚Çπ${displayPrice}</p></div>
    </div>`;
}

function openProduct(item) {
    currentItem = item; selectedSize = "";
    document.getElementById("m-title").innerText = item.name;
    const thumbBox = document.getElementById("m-thumbs");
    thumbBox.innerHTML = item.images.map((img, idx) => `<div class="thumb-box ${idx===0?'active':''}" onclick="swapImg(this, '${img}')">${img.length<=4?`<span>${img}</span>`:`<img src="${img}">`}</div>`).join("");
    swapImg(document.querySelector('.thumb-box'), item.images[0]);

    const mSizes = document.getElementById("m-sizes");
    if(item.hasSize) {
        document.getElementById("size-section").style.display = "block";
        mSizes.innerHTML = Object.keys(item.sizePrices).map(s => `<div class="size-btn" onclick="pickSize(this, '${s}', ${item.sizePrices[s]})">${s}<br><small>‚Çπ${item.sizePrices[s]}</small></div>`).join("");
        document.getElementById("m-price").innerText = "Select Size";
    } else {
        document.getElementById("size-section").style.display = "none";
        selectedSize = "N/A"; currentPrice = item.price;
        document.getElementById("m-price").innerText = "‚Çπ" + item.price;
    }
    document.getElementById("product-modal").style.display = "block";
}

function swapImg(el, src) {
    const main = document.getElementById("main-img-cont");
    main.innerHTML = src.length <= 4 ? `<span style="font-size:8rem">${src}</span>` : `<img src="${src}" style="width:100%; height:100%; object-fit:contain;">`;
    document.querySelectorAll('.thumb-box').forEach(t => t.classList.remove('active'));
    if(el) el.classList.add('active');
}

function pickSize(el, s, p) {
    selectedSize = s; currentPrice = p;
    document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('active'));
    el.classList.add('active');
    document.getElementById("m-price").innerText = "‚Çπ" + p;
}

function addToCart() {
    if(currentItem.hasSize && !selectedSize) return alert("Please select a size!");
    cart.push({...currentItem, selectedSize, finalPrice: currentPrice});
    updateCartUI(); closeModal();
}

function updateCartUI() {
    document.getElementById("cart-count").innerText = cart.length;
    document.getElementById("cart-floater").style.display = cart.length > 0 ? "block" : "none";
}

function openCart() {
    let total = 0;
    const list = document.getElementById("cart-items-list");
    list.innerHTML = cart.map((item, idx) => {
        total += item.finalPrice;
        return `<div class="cart-item">
            <div class="cart-img">${item.images[0].length <= 4 ? item.images[0] : `<img src="${item.images[0]}">`}</div>
            <div style="flex:1"><p style="font-size:0.8rem; font-weight:700">${item.name}</p><p style="font-size:0.7rem; color:#666">ID: ${item.id} | ${item.selectedSize} | ‚Çπ${item.finalPrice}</p></div>
            <button onclick="removeFromCart(${idx})" style="border:none; color:red; background:none;">‚úï</button>
        </div>`;
    }).join("");
    document.getElementById("cart-total").innerText = "Grand Total: ‚Çπ" + total;
    window.scrollTo(0,0);
    document.getElementById("cart-modal").style.display = "block";
}

function removeFromCart(idx) {
    cart.splice(idx, 1); updateCartUI();
    cart.length > 0 ? openCart() : closeCart();
}

function openCheckout(source) {
    if(source === 'direct' && currentItem.hasSize && !selectedSize) return alert("Select Size First!");
    orderSource = source;
    closeModal(); closeCart();
    window.scrollTo(0,0);
    document.getElementById("checkout-modal").style.display = "block";
}

function handleOrder(e) {
    e.preventDefault();
    const name = document.getElementById("cust-name").value;
    const phone = document.getElementById("cust-phone").value;
    const address = document.getElementById("cust-address").value;

    let msg = `*NEW ORDER - SANGEETHA VASTHRALAYAM*\n`;
    msg += `------------------------------\n`;
    msg += `*Customer:* ${name}\n`;
    msg += `*Mobile:* ${phone}\n`;
    msg += `*Address:* ${address}\n`;
    msg += `------------------------------\n\n`;
    msg += `*ORDERED ITEMS:*\n\n`;

    let total = 0;
    const items = orderSource === 'direct' ? [{...currentItem, selectedSize, finalPrice: currentPrice}] : cart;
    
    items.forEach((it, i) => {
        msg += `*Item ${i+1}:* ${it.name}\n`;
        msg += `*ID:* ${it.id}\n`;
        msg += `*Size:* ${it.selectedSize}\n`;
        msg += `*Price:* ‚Çπ${it.finalPrice}\n`;
        // This adds the image link so WhatsApp shows the preview
        if(it.images[0].length > 10) { 
            msg += `*View Product:* ${it.images[0]}\n`; 
        }
        msg += `\n`;
        total += it.finalPrice;
    });

    msg += `------------------------------\n`;
    msg += `*GRAND TOTAL: ‚Çπ${total}*\n`;
    msg += `------------------------------\n`;
    msg += `_Please confirm my order!_`;
    
    // Corrected WhatsApp Redirect
const waNumber = "916303594257"; 
window.open(`https://wa.me/${waNumber}?text=${encodeURIComponent(msg)}`);
}


function openCategoryView(catKey) {
    const cat = allProducts[catKey];
    document.getElementById("cat-title").innerText = cat.displayName;
    document.getElementById("category-grid").innerHTML = cat.items.map(i => renderCard(i, cat.hasSize)).join("");
    document.getElementById("home-container").style.display = "none";
    document.getElementById("category-container").style.display = "block";
    window.scrollTo(0,0);
}

function closeCategoryView() {
    document.getElementById("home-container").style.display = "block";
    document.getElementById("category-container").style.display = "none";
}

function closeModal() { document.getElementById("product-modal").style.display = "none"; }
function closeCart() { document.getElementById("cart-modal").style.display = "none"; }
function closeCheckout() { document.getElementById("checkout-modal").style.display = "none"; }
</script>
</body>
</html>
